var VORE={Class:{namespace:function(name,value){var parts=name.split(".");var type;var part;for(var i=0;i<parts.length;i++){part=parts.slice(0,i+1).join(".");eval("type = typeof("+part+");");if(type=="undefined"){eval(part+" = {};")}}eval(name+" = value;")},create:function(name,superClass,constructor,our){VORE.Class.namespace(name,constructor);if(superClass&&superClass!=Object&&superClass!=Function){var inheritence=function(){};inheritence.prototype=superClass.prototype;constructor.prototype=new inheritence();constructor.prototype.constructor=constructor;constructor.baseConstructor=superClass;constructor.superClass=superClass.prototype}for(var i in our){constructor.prototype[i]=our[i]}return constructor}}};VORE.Class.create("VORE.Controls.Control",Object,function(config){var thisContext=this;this.debug=config?config.debug:false;$(window).resize(function(){thisContext.resize()})},{listeners:{},debug:false,log:function(){if(!this.debug){return false}if(typeof console=="object"&&typeof console.log!="undefined"){try{console.log.apply(this,arguments)}catch(e){}}},resize:function(){},concatArgs:function(args,dargs){var result=[];for(var i=0;i<args.length;i++){result.push(args[i])}for(var i=1;i<dargs.length;i++){result.push(dargs[i])}return result},delegate:function(func){var self=this,dargs=arguments,f;f=function(){func.apply(self,self.concatArgs(arguments,dargs))};return f},addEventListener:function(eventName,func){var eventId=eventName;if(this.listeners[eventId]){this.listeners[eventId].push(func)}else{this.listeners[eventId]=[func]}},removeEventListeners:function(eventName){var eventId=eventName;if(this.listeners[eventId]){this.listeners[eventId]=[]}},fireEvent:function(eventName,args){var handlers,i,eventId;eventId=eventName;handlers=this.listeners[eventId];if(handlers){for(i=0;i<handlers.length;i++){handlers[i](args)}}}});VORE.Class.create("VORE.Controls.Spiral",VORE.Controls.Control,function(){VORE.Controls.Control.call(this);var thisContext=this;$(document).ready(function(){thisContext.initialize()})},{a:150,animationFactor:0.00009,b:0.5,angle:0.1,angles:[],arms:5,centerx:1000,centery:280,i:0,maxPoints:500,points:[],pointRadius:2,pulseColors:[[15,20,25],[62,73,86],[84,94,106],[49,26,77],[69,55,100],[104,100,64],],diceRollConstant:100,randomPulseColor:function(){return this.pulseColors[Math.floor(Math.random()*this.pulseColors.length)]},diceRoll:function(){return Math.floor(Math.random()*this.diceRollConstant)},performAnimation:function(timeSince,stop){var i,angle,x,y,thisContext;this.context.clearRect(0,0,this.canvasWidth,this.canvasHeight);if(!!timeSince){timeSince=Date.now()}this.timeDiff=timeSince-this.lastRan;if(isNaN(this.timeDiff)){this.timeDiff=1000/22}for(i=0;i<this.maxPoints;i++){angle=this.angles[i]*i;x=this.centerx+(this.a+this.b*angle)*Math.cos(angle+this.i);y=this.centery+(this.a+this.b*angle)*Math.sin(angle+this.i)/3;this.points[i].positionPoint({x:x,y:y,i:i,context:this.context});if(!this.points[i].pulsing()&&this.diceRoll()===0){this.points[i].transitionTo(this.randomPulseColor())}}if(!isNaN(this.timeDiff)){this.i-=this.animationFactor*this.timeDiff}this.lastRan=Date.now();if(!stop){requestAnimFrame(this.animationCallback)}},setupAnimation:function(){var thisContext=this,i;this.diffs=[];this.startTime=Date.now();this.animationCallback=this.delegate(this.performAnimation);this.$canvas=$("#SpiralCanvas");this.canvas=this.$canvas.get(0);this.context=this.canvas.getContext("2d");this.canvasHeight=this.$canvas.height();this.canvasWidth=this.$canvas.width();this.canvas.height=this.canvasHeight;this.canvas.width=this.canvasWidth;this.context.globalCompositeOperation="destination-over";for(i=0;i<this.maxPoints;i++){this.angles.push(Math.random()*1.5)}if($.browser.mozilla){this.performAnimation(Date.now(),true)}else{requestAnimFrame(this.delegate(this.performAnimation))}},createPoints:function(){for(var i=0;i<this.maxPoints;i++){this.points.push(new VORE.Controls.SpiralPoint({color:this.pulseColors[0]}))}window.points=this.points},initialize:function(){window.requestAnimFrame=(function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(callback){window.setTimeout(callback,1000/22)}})();this.setCenterPoint();this.createPoints();this.setupAnimation()},resize:function(){this.setCenterPoint()},setCenterPoint:function(){this.centerx=Math.floor($(window).width()/2);this.centery=310}});VORE.Class.create("VORE.Controls.SpiralPoint",VORE.Controls.Control,function(params){this.initialize(params)},{angle:0,maxPoints:0,arms:0,thisPoint:Object,radius:1,animationLengths:[500,2000,2000,2000,8000],pulsing:function(){return !!this.transitionColor},randomAnimationLength:function(){return this.animationLengths[Math.floor(Math.random()*this.animationLengths.length)]},transitionTo:function(color){if(this.pulsing()){return}this.animationLength=this.randomAnimationLength();this.startedAnimating=+new Date();this.transitionColor=color.slice(0)},initialize:function(params){this.setColor(params.color)},positionPoint:function(params){var oldFillStyle=params.context.fillStyle;if(!!params.context){params.context.fillStyle=this.colorString();params.context.beginPath();params.context.arc(params.x,params.y,this.radius,Math.PI*2,0,false);params.context.fill();params.context.fillStyle=oldFillStyle}},setColor:function(rgbArray){this.color=rgbArray.slice(0)},colorString:function(){var color=this.color,progress;if(this.transitionColor){progress=(((+new Date())-this.startedAnimating)/this.animationLength);color[0]=Math.floor(color[0]+((this.transitionColor[0]-color[0])*progress));color[1]=Math.floor(color[1]+((this.transitionColor[1]-color[1])*progress));color[2]=Math.floor(color[2]+((this.transitionColor[2]-color[2])*progress));if(progress>=1){this.color=this.transitionColor;this.transitionColor=null;this.startedAnimating=null;this.animationLength=null}}return["rgba(",color.join(","),", 1.0)"].join("")}});